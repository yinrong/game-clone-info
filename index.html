<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="style.css"/>
        <script src="jquery.js"></script>
        <script src="g_hero.js"></script>
        <script src="g_color.js"></script>
        <script src="g_date.js"></script>
    </head>
    <body>
        <script>

function draw(parent, data) {
    let entry
        if (parent === null) {
            entry = $('<div class="root"/>')
                .appendTo($('body'))
        } else {

            entry = $('<div class="entry"/>')
                .appendTo(parent)
        }
    let label = $('<div class="label"/>')
        .html(data.label)
        .appendTo(entry)

    // exclude *N from hero name
    let hero_name = data.label.replace(/\*\d+$/, '')

    if (g_color[hero_name]) {
        label.css('background-color', g_color[hero_name])
    }

    let mydate = g_date[hero_name + '.' + data.level]
    if (mydate) {
        let foot = $('<div class="foot"/>')
            .html(mydate)
            .appendTo(label)
    }


    if (!data.children) {
        return
    }
    let branch = $('<div class="branch"/>')
        .appendTo(entry)
        for (let child of data.children) {
            draw(branch, child)
        }
}

$(() => {
    for (let h of g_hero) {
        draw(null, h)
    }
})
        </script>
    </body>
</html>
